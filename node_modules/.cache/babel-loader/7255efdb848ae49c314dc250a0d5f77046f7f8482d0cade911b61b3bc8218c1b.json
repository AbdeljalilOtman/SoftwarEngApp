{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createStore } from 'vuex';\nimport api from '@/services/api.js'; // changed from `axios`\n\nexport default createStore({\n  state: {\n    user: null,\n    token: null,\n    isAuthenticated: false\n  },\n  mutations: {\n    SET_USER: function SET_USER(state, user) {\n      state.user = user;\n    },\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_AUTHENTICATED: function SET_AUTHENTICATED(state, isAuth) {\n      state.isAuthenticated = isAuth;\n    }\n  },\n  actions: {\n    registerUser: function registerUser(_ref, payload) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, _yield$api$post, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              _context.prev = 1;\n              _context.next = 4;\n              return api.post('/api/jobseekers/register', payload);\n            case 4:\n              _yield$api$post = _context.sent;\n              data = _yield$api$post.data;\n              commit('SET_USER', data.user);\n              commit('SET_TOKEN', data.token);\n              commit('SET_AUTHENTICATED', true);\n              localStorage.setItem('token', data.token);\n              _context.next = 16;\n              break;\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('Registration Error:', _context.t0);\n              throw _context.t0;\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 12]]);\n      }))();\n    },\n    loginUser: function loginUser(_ref2, payload) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit, _yield$api$post2, data;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return api.post('/api/login', payload);\n            case 4:\n              _yield$api$post2 = _context2.sent;\n              data = _yield$api$post2.data;\n              commit('SET_USER', data.user);\n              commit('SET_TOKEN', data.token);\n              commit('SET_AUTHENTICATED', true);\n              localStorage.setItem('token', data.token);\n              _context2.next = 16;\n              break;\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error('Login Error:', _context2.t0);\n              throw _context2.t0;\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 12]]);\n      }))();\n    },\n    logout: function logout(_ref3) {\n      var commit = _ref3.commit;\n      commit('SET_USER', null);\n      commit('SET_TOKEN', null);\n      commit('SET_AUTHENTICATED', false);\n      localStorage.removeItem('token');\n    }\n  },\n  getters: {\n    getUser: function getUser(state) {\n      return state.user;\n    },\n    isAuthenticated: function isAuthenticated(state) {\n      return state.isAuthenticated;\n    }\n  }\n});","map":{"version":3,"names":["createStore","api","state","user","token","isAuthenticated","mutations","SET_USER","SET_TOKEN","SET_AUTHENTICATED","isAuth","actions","registerUser","_ref","payload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","_yield$api$post","data","wrap","_callee$","_context","prev","next","post","sent","localStorage","setItem","t0","console","error","stop","loginUser","_ref2","_callee2","_yield$api$post2","_callee2$","_context2","logout","_ref3","removeItem","getters","getUser"],"sources":["C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex';\r\nimport api from '@/services/api.js'; // changed from `axios`\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null,\r\n    token: null,\r\n    isAuthenticated: false,\r\n  },\r\n  mutations: {\r\n    SET_USER(state, user) {\r\n      state.user = user;\r\n    },\r\n    SET_TOKEN(state, token) {\r\n      state.token = token;\r\n    },\r\n    SET_AUTHENTICATED(state, isAuth) {\r\n      state.isAuthenticated = isAuth;\r\n    }\r\n  },\r\n  actions: {\r\n    async registerUser({ commit }, payload) {\r\n      try {\r\n        // Use custom instance\r\n        const { data } = await api.post('/api/jobseekers/register', payload);\r\n        commit('SET_USER', data.user);\r\n        commit('SET_TOKEN', data.token);\r\n        commit('SET_AUTHENTICATED', true);\r\n        localStorage.setItem('token', data.token);\r\n      } catch (error) {\r\n        console.error('Registration Error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async loginUser({ commit }, payload) {\r\n      try {\r\n        // Use custom instance\r\n        const { data } = await api.post('/api/login', payload);\r\n        commit('SET_USER', data.user);\r\n        commit('SET_TOKEN', data.token);\r\n        commit('SET_AUTHENTICATED', true);\r\n        localStorage.setItem('token', data.token);\r\n      } catch (error) {\r\n        console.error('Login Error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    logout({ commit }) {\r\n      commit('SET_USER', null);\r\n      commit('SET_TOKEN', null);\r\n      commit('SET_AUTHENTICATED', false);\r\n      localStorage.removeItem('token');\r\n    }\r\n  },\r\n  getters: {\r\n    getUser(state) {\r\n      return state.user;\r\n    },\r\n    isAuthenticated(state) {\r\n      return state.isAuthenticated;\r\n    },\r\n  }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}