{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createStore } from 'vuex';\nimport api from '@/services/api.js';\nexport default createStore({\n  state: {\n    user: null,\n    token: localStorage.getItem('token') || null,\n    isAuthenticated: !!localStorage.getItem('token')\n  },\n  mutations: {\n    SET_USER: function SET_USER(state, user) {\n      state.user = user;\n    },\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n      localStorage.setItem('token', token); // Save token in localStorage\n    },\n    SET_AUTHENTICATED: function SET_AUTHENTICATED(state, isAuth) {\n      state.isAuthenticated = isAuth;\n    },\n    CLEAR_AUTH: function CLEAR_AUTH(state) {\n      state.user = null;\n      state.token = null;\n      state.isAuthenticated = false;\n      localStorage.removeItem('token'); // Clear token from localStorage\n    }\n  },\n  actions: {\n    registerUser: function registerUser(_ref, payload) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, _yield$api$post, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              _context.prev = 1;\n              _context.next = 4;\n              return api.post('/api/job-seekers/register', payload);\n            case 4:\n              _yield$api$post = _context.sent;\n              data = _yield$api$post.data;\n              // Commit user and token data to the store\n              commit('SET_USER', data.user);\n              commit('SET_TOKEN', data.token);\n              commit('SET_AUTHENTICATED', true);\n              return _context.abrupt(\"return\", data);\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('Registration Error:', _context.t0);\n              throw _context.t0;\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 12]]);\n      }))();\n    },\n    loginUser: function loginUser(_ref2, payload) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit;\n              _context2.prev = 1;\n              commit('SET_USER', payload.user);\n              commit('SET_TOKEN', payload.token);\n              commit('SET_AUTHENTICATED', true);\n              _context2.next = 11;\n              break;\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error('Login Error:', _context2.t0);\n              throw _context2.t0;\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 7]]);\n      }))();\n    },\n    logout: function logout(_ref3) {\n      var commit = _ref3.commit;\n      commit('CLEAR_AUTH');\n    },\n    initializeAuth: function initializeAuth(_ref4) {\n      var commit = _ref4.commit;\n      var token = localStorage.getItem('token');\n      if (token) {\n        // Optionally decode and validate the token here\n        commit('SET_TOKEN', token);\n        commit('SET_AUTHENTICATED', true);\n      }\n    }\n  },\n  getters: {\n    getUser: function getUser(state) {\n      return state.user;\n    },\n    isAuthenticated: function isAuthenticated(state) {\n      return state.isAuthenticated;\n    }\n  }\n});","map":{"version":3,"names":["createStore","api","state","user","token","localStorage","getItem","isAuthenticated","mutations","SET_USER","SET_TOKEN","setItem","SET_AUTHENTICATED","isAuth","CLEAR_AUTH","removeItem","actions","registerUser","_ref","payload","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","_yield$api$post","data","wrap","_callee$","_context","prev","next","post","sent","abrupt","t0","console","error","stop","loginUser","_ref2","_callee2","_callee2$","_context2","logout","_ref3","initializeAuth","_ref4","getters","getUser"],"sources":["C:/Users/Abdeljalil Otman/Desktop/frontendSofW/SoftwarEngApp/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex';\r\nimport api from '@/services/api.js';\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null,\r\n    token: localStorage.getItem('token') || null,\r\n    isAuthenticated: !!localStorage.getItem('token'),\r\n  },\r\n  mutations: {\r\n    SET_USER(state, user) {\r\n      state.user = user;\r\n    },\r\n    SET_TOKEN(state, token) {\r\n      state.token = token;\r\n      localStorage.setItem('token', token); // Save token in localStorage\r\n    },\r\n    SET_AUTHENTICATED(state, isAuth) {\r\n      state.isAuthenticated = isAuth;\r\n    },\r\n    CLEAR_AUTH(state) {\r\n      state.user = null;\r\n      state.token = null;\r\n      state.isAuthenticated = false;\r\n      localStorage.removeItem('token'); // Clear token from localStorage\r\n    },\r\n  },\r\n  actions: {\r\n    async registerUser({ commit }, payload) {\r\n      try {\r\n        // Send the registration request to the backend\r\n        const { data } = await api.post('/api/job-seekers/register', payload);\r\n        \r\n        // Commit user and token data to the store\r\n        commit('SET_USER', data.user);\r\n        commit('SET_TOKEN', data.token);\r\n        commit('SET_AUTHENTICATED', true);\r\n\r\n        return data; // Optionally return data to be used in the frontend\r\n      } catch (error) {\r\n        console.error('Registration Error:', error);\r\n        throw error; // This will be caught in the component\r\n      }\r\n    },\r\n    async loginUser({ commit }, payload) {\r\n      try {\r\n        commit('SET_USER', payload.user);\r\n        commit('SET_TOKEN', payload.token);\r\n        commit('SET_AUTHENTICATED', true);\r\n      } catch (error) {\r\n        console.error('Login Error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    logout({ commit }) {\r\n      commit('CLEAR_AUTH');\r\n    },\r\n    initializeAuth({ commit }) {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        // Optionally decode and validate the token here\r\n        commit('SET_TOKEN', token);\r\n        commit('SET_AUTHENTICATED', true);\r\n      }\r\n    },\r\n  },\r\n  getters: {\r\n    getUser(state) {\r\n      return state.user;\r\n    },\r\n    isAuthenticated(state) {\r\n      return state.isAuthenticated;\r\n    },\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}